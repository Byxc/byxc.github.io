{"meta":{"title":"ç™½äº‘å¿ƒåŸçš„åšå®¢","subtitle":null,"description":null,"author":"ç™½äº‘å¿ƒåŸ","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"Classçš„æœ¬è´¨","slug":"Classçš„æœ¬è´¨","date":"2019-11-25T07:14:55.000Z","updated":"2019-11-25T10:17:14.097Z","comments":true,"path":"2019/11/25/Classçš„æœ¬è´¨/","link":"","permalink":"http://yoursite.com/2019/11/25/Classçš„æœ¬è´¨/","excerpt":"æ ¹æ®ä¹‹å‰æˆ‘ä»¬å¯¹ OC å¯¹è±¡æœ¬è´¨çš„æ¢è®¨ä¸­æˆ‘ä»¬çŸ¥é“ï¼ŒClass å¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæŒ‡å‘ objc_class ç»“æ„ä½“çš„æŒ‡é’ˆã€‚ä¸ç®¡äº‹ç±»å¯¹è±¡è¿˜æ˜¯å…ƒç±»å¯¹è±¡ï¼Œå…¶ç±»å‹éƒ½æ˜¯ Classï¼Œä¹Ÿå°±æ˜¯è¯´å…¶åº•å±‚å…¶å®éƒ½æ˜¯ objc_class ç»“æ„ä½“æŒ‡é’ˆã€‚","text":"æ ¹æ®ä¹‹å‰æˆ‘ä»¬å¯¹ OC å¯¹è±¡æœ¬è´¨çš„æ¢è®¨ä¸­æˆ‘ä»¬çŸ¥é“ï¼ŒClass å¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæŒ‡å‘ objc_class ç»“æ„ä½“çš„æŒ‡é’ˆã€‚ä¸ç®¡äº‹ç±»å¯¹è±¡è¿˜æ˜¯å…ƒç±»å¯¹è±¡ï¼Œå…¶ç±»å‹éƒ½æ˜¯ Classï¼Œä¹Ÿå°±æ˜¯è¯´å…¶åº•å±‚å…¶å®éƒ½æ˜¯ objc_class ç»“æ„ä½“æŒ‡é’ˆã€‚ æˆ‘ä»¬å¯ä»¥ç‚¹å‡» Class æŸ¥çœ‹å…¶å†…éƒ¨ä»£ç ï¼š 123456789101112131415161718192021#if !OBJC_TYPES_DEFINED/// An opaque type that represents an Objective-C class.typedef struct objc_class *Class;struct objc_class &#123; Class _Nonnull isa OBJC_ISA_AVAILABILITY;#if !__OBJC2__ Class _Nullable super_class OBJC2_UNAVAILABLE; const char * _Nonnull name OBJC2_UNAVAILABLE; long version OBJC2_UNAVAILABLE; long info OBJC2_UNAVAILABLE; long instance_size OBJC2_UNAVAILABLE; struct objc_ivar_list * _Nullable ivars OBJC2_UNAVAILABLE; struct objc_method_list * _Nullable * _Nullable methodLists OBJC2_UNAVAILABLE; struct objc_cache * _Nonnull cache OBJC2_UNAVAILABLE; struct objc_protocol_list * _Nullable protocols OBJC2_UNAVAILABLE;#endif&#125; OBJC2_UNAVAILABLE;/* Use `Class` instead of `struct objc_class *` */ å…¶ä¸­æœ‰å¾ˆå¤š OBJC2_UNAVAILABLE æ ‡è®°ï¼Œè¡¨ç¤ºç›®å‰è¿™äº›ä»£ç å·²ç»è¢«å¼ƒç”¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ objc æºç æŸ¥æ‰¾ç›®å‰ objc_class ç»“æ„ä½“çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627struct objc_class : objc_object &#123; // Class ISA; Class superclass; cache_t cache; // formerly cache pointer and vtable(æ–¹æ³•ç¼“å­˜) class_data_bits_t bits; // class_rw_t * plus custom rr/alloc flags(ç±»çš„å…·ä½“ä¿¡æ¯) class_rw_t *data() &#123; return bits.data(); &#125; void setData(class_rw_t *newData) &#123; bits.setData(newData); &#125; // ä¸­é—´çœç•¥éƒ¨åˆ†ä»£ç  ... void chooseClassArrayIndex(); void setClassArrayIndex(unsigned Idx) &#123; bits.setClassArrayIndex(Idx); &#125; unsigned classArrayIndex() &#123; return bits.classArrayIndex(); &#125;&#125;; æˆ‘ä»¬å‘ç° objc_class è¿™ä¸ªç»“æ„ä½“ç»§æ‰¿ objc_objectï¼Œæˆ‘ä»¬å†æ‰¾åˆ° objc_object çš„ä»£ç ï¼š 12345678910111213141516171819202122struct objc_object &#123;private: isa_t isa;public: // ISA() assumes this is NOT a tagged pointer object Class ISA(); // getIsa() allows this to be a tagged pointer object Class getIsa(); // ä¸­é—´çœç•¥éƒ¨åˆ†ä»£ç  ... bool sidetable_tryRetain(); uintptr_t sidetable_retainCount();#if DEBUG bool sidetable_present();#endif&#125;; æˆ‘ä»¬å‘ç° objc_object ä¸­å­˜åœ¨ä¸€ä¸ª isa æŒ‡é’ˆï¼Œç”±äºç»§æ‰¿å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ objc_class åŒæ ·æ‹¥æœ‰ isa æŒ‡é’ˆã€‚ é‚£ä¹ˆæˆ‘ä»¬ä¹‹å‰äº†è§£åˆ°çš„ï¼Œç±»ä¸­å­˜å‚¨ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯ã€å®ä¾‹æ–¹æ³•è¿™äº›ä¿¡æ¯å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨ class_rw_t ç»“æ„ä½“ä¸­æ‰¾åˆ°ä¸€äº›ä¿¡æ¯ï¼š 12345678910111213141516171819202122232425262728293031323334struct class_rw_t &#123; // Be warned that Symbolication knows the layout of this structure. uint32_t flags; uint32_t version; const class_ro_t *ro; // æ–¹æ³•åˆ—è¡¨ method_array_t methods; // å±æ€§åˆ—è¡¨ property_array_t properties; // åè®®åˆ—è¡¨ protocol_array_t protocols; Class firstSubclass; Class nextSiblingClass; char *demangledName; // ä¸­é—´çœç•¥éƒ¨åˆ†ä»£ç  ... // set and clear must not overlap void changeFlags(uint32_t set, uint32_t clear) &#123; assert((set &amp; clear) == 0); uint32_t oldf, newf; do &#123; oldf = flags; newf = (oldf | set) &amp; ~clear; &#125; while (!OSAtomicCompareAndSwap32Barrier(oldf, newf, (volatile int32_t *)&amp;flags)); &#125;&#125;; å¯ä»¥å‘ç°å…¶ä¸­åŒ…å«æ–¹æ³•åˆ—è¡¨ã€å±æ€§åˆ—è¡¨ã€åè®®åˆ—è¡¨ç­‰ä¿¡æ¯ã€‚è€Œ class_rw_t æ˜¯é€šè¿‡ bits è°ƒç”¨ data æ–¹æ³•è·å¾—çš„ï¼Œé€šè¿‡æŸ¥çœ‹æ–¹æ³•å†…éƒ¨å®ç°æˆ‘ä»¬å¯ä»¥çŸ¥é“ data å‡½æ•°å†…éƒ¨ä»…ä»…æ˜¯å¯¹ bits è¿›è¡Œ &amp; FAST_DATA_MASK æ“ä½œï¼Œå…¶å€¼ä¸º 0x00007ffffffffff8ULã€‚ 123456// data pointer#define FAST_DATA_MASK 0x00007ffffffffff8ULclass_rw_t* data() &#123; return (class_rw_t *)(bits &amp; FAST_DATA_MASK);&#125; è€Œæˆå‘˜å˜é‡ä¿¡æ¯åˆ™æ˜¯å­˜åœ¨ class_ro_t ä¸­çš„ï¼Œå…¶å†…éƒ¨ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&#123; uint32_t flags; uint32_t instanceStart; // å®ä¾‹å¯¹è±¡å¤§å° uint32_t instanceSize;#ifdef __LP64__ uint32_t reserved;#endif const uint8_t * ivarLayout; // ç±»å const char * name; method_list_t * baseMethodList; protocol_list_t * baseProtocols; // æˆå‘˜å˜é‡åˆ—è¡¨ const ivar_list_t * ivars; const uint8_t * weakIvarLayout; property_list_t *baseProperties; // This field exists only when RO_HAS_SWIFT_INITIALIZER is set. _objc_swiftMetadataInitializer __ptrauth_objc_method_list_imp _swiftMetadataInitializer_NEVER_USE[0]; _objc_swiftMetadataInitializer swiftMetadataInitializer() const &#123; if (flags &amp; RO_HAS_SWIFT_INITIALIZER) &#123; return _swiftMetadataInitializer_NEVER_USE[0]; &#125; else &#123; return nil; &#125; &#125; method_list_t *baseMethods() const &#123; return baseMethodList; &#125; class_ro_t *duplicate() const &#123; if (flags &amp; RO_HAS_SWIFT_INITIALIZER) &#123; size_t size = sizeof(*this) + sizeof(_swiftMetadataInitializer_NEVER_USE[0]); class_ro_t *ro = (class_ro_t *)memdup(this, size); ro-&gt;_swiftMetadataInitializer_NEVER_USE[0] = this-&gt;_swiftMetadataInitializer_NEVER_USE[0]; return ro; &#125; else &#123; size_t size = sizeof(*this); class_ro_t *ro = (class_ro_t *)memdup(this, size); return ro; &#125; &#125;&#125; å¯ä½¿ç”¨ä¸‹å›¾æè¿°ä¹‹é—´çš„å…³ç³»","categories":[],"tags":[]},{"title":"OCå¯¹è±¡çš„æœ¬è´¨","slug":"OCå¯¹è±¡çš„æœ¬è´¨","date":"2019-11-18T05:37:01.000Z","updated":"2019-11-18T12:11:11.630Z","comments":true,"path":"2019/11/18/OCå¯¹è±¡çš„æœ¬è´¨/","link":"","permalink":"http://yoursite.com/2019/11/18/OCå¯¹è±¡çš„æœ¬è´¨/","excerpt":"ä»€ä¹ˆæ˜¯OCè¯­è¨€ï¼ŒOCå¯¹è±¡ã€ç±»çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼ŒOCå¯¹è±¡çš„å†…å­˜å¸ƒå±€æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Œä¸€ä¸ªè‡ªå®šä¹‰ç±»çš„å¯¹è±¡çš„æœ¬è´¨åŠå ç”¨å¤šå°‘å†…å­˜ï¼Ÿ","text":"ä»€ä¹ˆæ˜¯OCè¯­è¨€ï¼ŒOCå¯¹è±¡ã€ç±»çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼ŒOCå¯¹è±¡çš„å†…å­˜å¸ƒå±€æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Œä¸€ä¸ªè‡ªå®šä¹‰ç±»çš„å¯¹è±¡çš„æœ¬è´¨åŠå ç”¨å¤šå°‘å†…å­˜ï¼Ÿ 1. ä»€ä¹ˆæ˜¯OCè¯­è¨€ï¼Ÿé¦–å…ˆæˆ‘ä»¬è°ˆè°ˆä»€ä¹ˆæ˜¯åšç¼–ç¨‹è¯­è¨€ï¼Œç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ç§è®©äººä»¬èƒ½è¯»æ‡‚å¹¶ä¸”èƒ½å¤Ÿå±•ç°ç¨‹åºçš„æ‰§è¡Œè¡Œä¸ºçš„è¯­è¨€ï¼ŒåŒ…æ‹¬è¯­æ³•ï¼ˆæ­£ç¡®çš„è¡¨è¾¾å¼ä»¥åŠçŠ¶æ€æœºçš„ä½¿ç”¨è§„åˆ™ï¼‰ä»¥åŠè¯­ä¹‰ï¼ˆå¦‚ä½•å»ç»„ç»‡è¿™äº›è¡¨è¾¾å¼ä»¥åŠçŠ¶æ€æœºä»¥ä¸€ç§æœ‰æ„ä¹‰çš„æ–¹å¼å»å®Œæˆæˆ‘ä»¬çš„ç›®æ ‡ï¼‰ã€‚Objective-C åº•å±‚å…¶å®æ˜¯ C\\C++ ä»£ç ï¼ŒOC çš„å¯¹è±¡ç»“æ„éƒ½æ˜¯é€šè¿‡C\\C++ ç»“æ„ä½“å®ç°çš„ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå°† OC çš„ .m æ–‡ä»¶è½¬æ¢ä¸ºå¯¹åº”çš„ c++ æ–‡ä»¶ï¼š 12345// è¿™ç§æ–¹å¼æ²¡æœ‰æŒ‡å®šæ¶æ„ä¾‹å¦‚arm64æ¶æ„clang -rewrite-objc main.m -o main.cpp// æˆ–ä½¿ç”¨ xcrun æŒ‡å®šæ¶æ„xcrun -sdk iphoneos clang -arch arm64 -rewrite-objc main.m -o main-arm64.cpp OC ä»£ç å¦‚ä¸‹ï¼š 12345678910#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; NSObject *objc = [[NSObject alloc] init]; NSLog(@&quot;Hello, World!&quot;); &#125; return 0;&#125; ä½¿ç”¨ xcrun è½¬æ¢ä¸º cpp æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ° NSObject_IMPL ç»“æ„ä½“ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š 123struct NSObject_IMPL &#123; Class isa;&#125;; 1typedef struct objc_class *Class; 2. OC å¯¹è±¡ã€ç±»çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæ ¹æ®ä¸Šè¿°è½¬æ¢ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å‘ç° Class çš„æœ¬è´¨å…¶å®æ˜¯ä¸€ä¸ªæŒ‡é’ˆ OC å¯¹è±¡ã€ç±»å…¶å®æ˜¯åŸºäº c\\c++ ç»“æ„ä½“å®ç°çš„ã€‚ 3. OC å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€ï¼Œä¸€ä¸ª NSObject å¯¹è±¡å å¤šå°‘å†…å­˜ï¼ŸNSObject è½¬æ¢ä¸º c è¯­è¨€å…¶å®å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå¦‚ä¸Šçš„ NSObject_IMPL ï¼Œè¯¥ç»“æ„ä½“çš„æˆå‘˜åªæœ‰ä¸€ä¸ª isa æŒ‡é’ˆï¼Œåœ¨ 64 ä½æ¶æ„ä¸­ä¸€ä¸ªæŒ‡é’ˆå  8 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ª NSObject å¯¹è±¡æ‰€å çš„å†…å­˜æ˜¯ 8 ä¸ªå­—èŠ‚ã€‚ ä½†æ˜¯æˆ‘ä»¬çœŸçš„å¯ä»¥è®¤ä¸ºä¸€ä¸ª NSObject å¯¹è±¡å°±å ç”¨ 8 ä¸ªå­—èŠ‚å—ï¼Ÿ æˆ‘ä»¬å¯ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼šæ–¹å¼ä¸€ï¼š 12// æ‰“å°ä¿¡æ¯ 8å’Œ16NSLog(@&quot;%zd,%zd&quot;, class_getInstanceSize([NSObject class]) ,class_getInstanceSize([Student class])); æ–¹å¼äºŒï¼š å®æ—¶æŸ¥çœ‹å†…å­˜æ•°æ®ï¼šæ‰“æ–­ç‚¹ -&gt; Debug Workflow -&gt; viewMemory address -&gt; è¾“å…¥ stu å¯¹è±¡çš„åœ°å€ æ–¹å¼ä¸‰ï¼š é€šè¿‡ lldb æŒ‡ä»¤ 1234567891011121314memory read 0x10074c450// ç®€å†™ x 0x10074c450// å¢åŠ è¯»å–æ¡ä»¶// memory read/æ•°é‡æ ¼å¼å­—èŠ‚æ•° å†…å­˜åœ°å€// ç®€å†™ x/æ•°é‡æ ¼å¼å­—èŠ‚æ•° å†…å­˜åœ°å€// æ ¼å¼ xæ˜¯16è¿›åˆ¶ï¼Œfæ˜¯æµ®ç‚¹ï¼Œdæ˜¯10è¿›åˆ¶// å­—èŠ‚å¤§å° bï¼šbyte 1å­—èŠ‚ï¼Œhï¼šhalf word 2å­—èŠ‚ï¼Œwï¼šword 4å­—èŠ‚ï¼Œgï¼šgiant word 8å­—èŠ‚ç¤ºä¾‹ï¼šx/4xw // /åé¢è¡¨ç¤ºå¦‚ä½•è¯»å–æ•°æ® wè¡¨ç¤º4ä¸ªå­—èŠ‚4ä¸ªå­—èŠ‚è¯»å–ï¼Œxè¡¨ç¤ºä»¥16è¿›åˆ¶çš„æ–¹å¼è¯»å–æ•°æ®ï¼Œ4åˆ™è¡¨ç¤ºè¯»å–4æ¬¡// åŒæ—¶å¯ä»¥ä¿®æ”¹å€¼//å°†_noçš„å€¼æ”¹ä¸ºäº†6memory write 0x100400c68 6 è¡¨é¢ä¸Šå¦‚æ­¤ï¼Œä½†å®é™…ä¸Šä¸€ä¸ª NSObject å®ä¾‹å¯¹è±¡çš„å¤§å°ç¡®å®ä¸º8ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ç³»ç»Ÿç»™å…¶åˆ†é…çš„å†…å­˜å…¶å®æ˜¯16ä¸ªå­—èŠ‚ã€‚å¯ä»¥é€šè¿‡objc4æºç æ¥æ¢ç©¶ä¸€ä¸‹ä¸ºä»€ä¹ˆã€‚ æœç´¢ class_getInstanceSize æ–¹æ³• 12345size_t class_getInstanceSize(Class cls)&#123; if (!cls) return 0; return cls-&gt;alignedInstanceSize();&#125; æˆ‘ä»¬ä¼šå‘ç°è¿™ä¸ªæ–¹æ³•è¿”å›å€¼æ˜¯cls-&gt;alignedInstanceSize() 12345// Class&apos;s ivar size rounded up to a pointer-size boundary.// æ³¨é‡Šæ„æ€ï¼šè¿”å›å€¼æˆå‘˜å˜é‡çš„å ç”¨å†…å­˜å¤§å°uint32_t alignedInstanceSize() &#123; return word_align(unalignedInstanceSize());&#125; æˆ‘ä»¬ç»§ç»­çœ‹ä¸‹ malloc_sizeï¼Œç”±äºè‹¹æœéƒ¨åˆ†æºç ä¸å…¬å¼€ï¼Œä¸è¿‡ä¸å½±å“ä»Šå¤©è®¨è®ºå†…å®¹ï¼Œæˆ‘ä»¬å…ˆ malloc.h æ–‡ä»¶ä¸­å‡½æ•°å£°æ˜ï¼š 123/* Returns size of given ptr */// æ³¨é‡Šæ„æ€ï¼šè¿”å›åˆ†é…ç»™æŒ‡é’ˆçš„å ç”¨å†…å­˜å¤§å°extern size_t malloc_size(const void *ptr); æ€»ç»“ï¼šé€šè¿‡é˜…è¯»æºç ï¼Œå‘ç°ä¸€ä¸ª NSObject å¯¹è±¡ï¼Œç³»ç»Ÿç»™å…¶åˆ†é…çš„ç©ºé—´ä¸º 16 ä¸ªå­—èŠ‚ï¼Œåªä¸è¿‡å…¶çœŸæ­£åˆ©ç”¨èµ·æ¥çš„åªæœ‰ 8 ä¸ªå­—èŠ‚ã€‚ 1NSObject *obj = [[NSObject alloc] init]; ä¸Šé¢è¿™è¡Œä»£ç ï¼Œå¯ä»¥å‘ç°ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š alloc: åˆ†é…å†…å­˜ç©ºé—´init: åˆå§‹åŒ– æ‰€ä»¥ï¼Œæˆ‘ä»¬æƒ³æ¢ç©¶å®è´¨çš„è¯å¯ä»¥ä» alloc æ–¹æ³•å¾€é‡Œé¢æŸ¥çœ‹ï¼Œä» alloc å¼€å§‹æœç´¢çš„è¯å¤ªå¤šäº†ï¼Œæˆ‘ä»¬ç›´æ¥ä» allocWithZone å¼€å§‹æŸ¥çœ‹ 12345678910111213141516171819202122232425262728293031323334+ (id)allocWithZone:(struct _NSZone *)zone &#123; return _objc_rootAllocWithZone(self, (malloc_zone_t *)zone);&#125;//allocWithZone è°ƒç”¨çš„æ˜¯: _objc_rootAllocWithZoneid _objc_rootAllocWithZone(Class cls, malloc_zone_t *zone)&#123; id obj; /* ä¸ºäº†æ›´æ–¹ä¾¿ç†è§£ï¼Œå°†éƒ¨åˆ†ä»£ç çœç•¥ */ obj = class_createInstance(cls, 0); return obj;&#125;//_objc_rootAllocWithZone åˆ†é…å†…å­˜ç©ºé—´å…¶å®æ˜¯: class_createInstanceid class_createInstance(Class cls, size_t extraBytes)&#123; return _class_createInstanceFromZone(cls, extraBytes, nil);&#125;// ç»§ç»­æŸ¥æ‰¾...static __attribute__((always_inline)) id _class_createInstanceFromZone(Class cls, size_t extraBytes, void *zone)&#123; /* ä¸ºäº†æ›´æ–¹ä¾¿ç†è§£ï¼Œå°†éƒ¨åˆ†ä»£ç çœç•¥ */ size_t size = cls-&gt;instanceSize(extraBytes); id obj; obj = (id)calloc(1, size); return obj;&#125; å…³é”®ä½ç½®ï¼š 123456789101112// Class&apos;s ivar size rounded up to a pointer-size boundary.uint32_t alignedInstanceSize() &#123; return word_align(unalignedInstanceSize());&#125;size_t instanceSize(size_t extraBytes) &#123; // å¦‚æœæ˜¯ NSObject ï¼Œä¸‹é¢è¿™è¡Œä»£ç ç›¸å½“äº size_t size = 8; size_t size = alignedInstanceSize() + extraBytes; // CF requires all objects be at least 16 bytes. if (size &lt; 16) size = 16; return size;&#125; é€šè¿‡æ³¨é‡Šå’Œä»£ç å¯ä»¥å‘ç°ï¼ŒCFï¼šCoreFoundationï¼Œç¡¬æ€§è§„å®šï¼Œè¿”å› size æœ€å°ä¸º16ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºè‹¹æœè®¾è®¡ CF æ¡†æ¶ï¼ŒåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±è®¾è®¡ä¸€å¥—æ¡†æ¶ï¼Œä¸ºäº†æˆ‘ä»¬çš„æ¡†æ¶èƒ½å¤Ÿæ›´å¥½çš„è¿è¡Œï¼Œè‚¯å®šä¼šåšå‡ºä¸€äº›è§„å®šã€çº¦æŸï¼Œè¿™æ ·å°±å¯ä»¥ç†è§£äº†ã€‚è‡³äº word_alignï¼Œä¸ å†…å­˜å¯¹é½ æœ‰å…³ã€‚ 4. è‡ªå®šä¹‰ç±»çš„å†…éƒ¨å®ç°123456789101112131415161718192021@interface Student : NSObject&#123; @public int _no; int _age;&#125;@end@implementation Studentint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; Student *stu = [[Student alloc] init]; stu -&gt; _no = 4; stu -&gt; _age = 5; NSLog(@&quot;%@&quot;,stu); &#125; return 0;&#125;@end åŒæ ·è½¬æ¢ä¸º c++ æ–‡ä»¶ï¼Œå¾—åˆ° Student_IMPLï¼š 12345struct Student_IMPL &#123; struct NSObject_IMPL NSObject_IVARS; int _no; int _age;&#125;; å‘ç°ç¬¬ä¸€ä¸ªæ˜¯ NSObject_IMPL çš„å®ç°ï¼Œç”±äºå…¶å†…éƒ¨å°±æ˜¯ Class isa;ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‡è®¾ struct NSObject_IMPL NSObject_IVARS; å¯ä»¥ç­‰ä»·äº Class isa; ã€‚å› æ­¤å¯çŸ¥åˆ›å»º Student å¯¹è±¡é¦–å…ˆä¼šåˆ†é… 16 ä¸ªå­—èŠ‚ï¼Œisa 8 _no 4 _age 4 ã€‚ ä»å¦å¤–ä¸€ä¸ªè§’åº¦ï¼Œå…¶å®è¿˜æœ‰ å†…å­˜å¯¹é½ è¿™ä¸ªæ¦‚å¿µï¼Œå°±ç®—æ˜¯æ²¡æœ‰ OC å¯¹è±¡è‡³å°‘å ç”¨ 16 ä¸ªå­—èŠ‚è¿™ä¸ªè§„å®šï¼Œ Student_IMPL ä¹Ÿå ç”¨ 16 ä¸ªå­—èŠ‚ï¼Œå†…å­˜å¯¹é½æœ‰ä¸€æ¡è§„å®šï¼šç»“æ„ä½“çš„å¤§å°æ¯”å¿…é¡»æ˜¯æœ€å¤§æˆå‘˜å¤§å°çš„å€æ•°ã€‚ 5. æ›´å¤æ‚çš„ç»§æ‰¿å…³ç³»123456789101112131415161718192021222324252627282930/* Person */@interface Person : NSObject&#123; int _age;&#125;@end@implementation Person@end/* Student */@interface Student : Person&#123; int _no;&#125;@end@implementation Student@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; NSLog(@&quot;%zd %zd&quot;, class_getInstanceSize([Person class]), class_getInstanceSize([Student class]) ); &#125; return 0;&#125; æˆ‘ä»¬å‘ç°åªè¦æ˜¯ç»§æ‰¿è‡ªNSObjectçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåº•å±‚ç»“æ„ä½“å†…ä¸€å®šæœ‰ä¸€ä¸ªisaæŒ‡é’ˆã€‚é‚£ä¹ˆä»–ä»¬æ‰€å çš„å†…å­˜ç©ºé—´æ˜¯å¤šå°‘å‘¢ï¼Ÿå•çº¯çš„å°†æŒ‡é’ˆå’Œæˆå‘˜å˜é‡æ‰€å çš„å†…å­˜ç›¸åŠ å³å¯å—ï¼Ÿä¸Šè¿°ä»£ç å®é™…æ‰“å°çš„å†…å®¹æ˜¯16 16ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œpersonå¯¹è±¡å’Œstudentå¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´éƒ½ä¸º16ä¸ªå­—èŠ‚ã€‚å…¶å®å®é™…ä¸Špersonå¯¹è±¡ç¡®å®åªä½¿ç”¨äº†12ä¸ªå­—èŠ‚ã€‚ä½†æ˜¯å› ä¸ºå†…å­˜å¯¹é½çš„åŸå› ã€‚ä½¿personå¯¹è±¡ä¹Ÿå ç”¨16ä¸ªå­—èŠ‚ã€‚ ç¼–è¯‘å™¨åœ¨ç»™ç»“æ„ä½“å¼€è¾Ÿç©ºé—´æ—¶ï¼Œé¦–å…ˆæ‰¾åˆ°ç»“æ„ä½“ä¸­æœ€å®½çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå¯»æ‰¾å†…å­˜åœ°å€èƒ½æ˜¯è¯¥åŸºæœ¬æ•°æ®ç±»å‹çš„æ•´å€çš„ä½ç½®ï¼Œä½œä¸ºç»“æ„ä½“çš„é¦–åœ°å€ã€‚å°†è¿™ä¸ªæœ€å®½çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ä½œä¸ºå¯¹é½æ¨¡æ•°ã€‚ä¸ºç»“æ„ä½“çš„ä¸€ä¸ªæˆå‘˜å¼€è¾Ÿç©ºé—´ä¹‹å‰ï¼Œç¼–è¯‘å™¨é¦–å…ˆæ£€æŸ¥é¢„å¼€è¾Ÿç©ºé—´çš„é¦–åœ°å€ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»æ˜¯å¦æ˜¯æœ¬æˆå‘˜çš„æ•´æ•°å€ï¼Œè‹¥æ˜¯ï¼Œåˆ™å­˜æ”¾æœ¬æˆå‘˜ï¼Œåä¹‹ï¼Œåˆ™åœ¨æœ¬æˆå‘˜å’Œä¸Šä¸€ä¸ªæˆå‘˜ä¹‹é—´å¡«å……ä¸€å®šçš„å­—èŠ‚ï¼Œä»¥è¾¾åˆ°æ•´æ•°å€çš„è¦æ±‚ï¼Œä¹Ÿå°±æ˜¯å°†é¢„å¼€è¾Ÿç©ºé—´çš„é¦–åœ°å€åç§»å‡ ä¸ªå­—èŠ‚ã€‚ æˆ‘ä»¬å¯ä»¥æ€»ç»“å†…å­˜å¯¹é½ä¸ºä¸¤ä¸ªåŸåˆ™ï¼š å‰é¢çš„åœ°å€å¿…é¡»æ˜¯åé¢çš„åœ°å€æ­£æ•°å€,ä¸æ˜¯å°±è¡¥é½ã€‚ æ•´ä¸ªStructçš„åœ°å€å¿…é¡»æ˜¯æœ€å¤§å­—èŠ‚çš„æ•´æ•°å€ã€‚ 6. OCå¯¹è±¡çš„åˆ†ç±»12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#import &lt;Foundation/Foundation.h&gt;#import &lt;objc/runtime.h&gt;/* Person */ @interface Person : NSObject &lt;NSCopying&gt;&#123; @public int _age;&#125;@property (nonatomic, assign) int height;- (void)personMethod;+ (void)personClassMethod;@end@implementation Person- (void)personMethod &#123;&#125;+ (void)personClassMethod &#123;&#125;@end/* Student */@interface Student : Person &lt;NSCoding&gt;&#123; @public int _no;&#125;@property (nonatomic, assign) int score;- (void)studentMethod;+ (void)studentClassMethod;@end@implementation Student- (void)studentMethod &#123;&#125;+ (void)studentClassMethod &#123;&#125;@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; NSObject *object1 = [[NSObject alloc] init]; NSObject *object2 = [[NSObject alloc] init]; Student *stu = [[Student alloc] init]; [Student load]; Person *p1 = [[Person alloc] init]; p1-&gt;_age = 10; [p1 personMethod]; [Person personClassMethod]; Person *p2 = [[Person alloc] init]; p2-&gt;_age = 20; &#125; return 0;&#125; OCå¯¹è±¡ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š instanceå¯¹è±¡ï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ classå¯¹è±¡ï¼ˆç±»å¯¹è±¡ï¼‰ meta-classå¯¹è±¡ï¼ˆå…ƒç±»å¯¹è±¡ï¼‰ å®ä¾‹å¯¹è±¡instanceå¯¹è±¡å°±æ˜¯é€šè¿‡ç±»allocå‡ºæ¥çš„å¯¹è±¡ï¼Œæ¯æ¬¡è°ƒç”¨allocéƒ½ä¼šäº§ç”Ÿæ–°çš„instanceå¯¹è±¡ 12NSObjcet *object1 = [[NSObjcet alloc] init];NSObjcet *object2 = [[NSObjcet alloc] init]; object1å’Œobject2éƒ½æ˜¯NSObjectçš„instaceå¯¹è±¡ï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ï¼Œä½†ä»–ä»¬æ˜¯ä¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”åˆ†åˆ«å æ®ç€ä¸¤å—ä¸åŒçš„å†…å­˜ã€‚instanceå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯åŒ…æ‹¬ï¼š isa æŒ‡é’ˆ å…¶ä»–æˆå‘˜å˜é‡ åœ¨ä¸Šå›¾å®ä¾‹å¯¹è±¡ä¸­æ ¹æœ¬æ²¡æœ‰çœ‹åˆ°æ–¹æ³•ï¼Œé‚£ä¹ˆå®ä¾‹å¯¹è±¡çš„æ–¹æ³•çš„ä»£ç æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿé‚£ä¹ˆç±»çš„æ–¹æ³•çš„ä¿¡æ¯ï¼Œåè®®çš„ä¿¡æ¯ï¼Œå±æ€§çš„ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ 12345678Class objectClass1 = [object1 class];Class objectClass2 = [object2 class];Class objectClass3 = [NSObject class];// runtimeClass objectClass4 = object_getClass(object1);Class objectClass5 = object_getClass(object2);NSLog(@&quot;%p %p %p %p %p&quot;, objectClass1, objectClass2, objectClass3, objectClass4, objectClass5); classå¯¹è±¡:æˆ‘ä»¬é€šè¿‡classæ–¹æ³•æˆ– runtime æ–¹æ³•å¾—åˆ°ä¸€ä¸ª class å¯¹è±¡ã€‚class å¯¹è±¡ä¹Ÿå°±æ˜¯ç±»å¯¹è±¡ã€‚æ¯ä¸€ä¸ªç±»åœ¨å†…å­˜ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ª class å¯¹è±¡ã€‚ class å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ï¼š isa æŒ‡é’ˆ superclass æŒ‡é’ˆ ç±»çš„å±æ€§ä¿¡æ¯ï¼ˆ@propertyï¼‰ï¼Œç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯ï¼ˆivarï¼‰ ç±»çš„å¯¹è±¡æ–¹æ³•ä¿¡æ¯ï¼ˆinstance methodï¼‰ï¼Œç±»çš„åè®®ä¿¡æ¯ï¼ˆprotocolï¼‰ æˆå‘˜å˜é‡çš„å€¼æ˜¯å­˜å‚¨åœ¨å®ä¾‹å¯¹è±¡ä¸­çš„ã€‚ å› ä¸ºåªæœ‰å½“æˆ‘ä»¬åˆ›å»ºå®ä¾‹å¯¹è±¡çš„æ—¶å€™æ‰ä¸ºæˆå‘˜å˜èµ‹å€¼ã€‚ä½†æ˜¯æˆå‘˜å˜é‡å«ä»€ä¹ˆåå­—ï¼Œæ˜¯ä»€ä¹ˆç±»å‹ï¼Œåªéœ€è¦æœ‰ä¸€ä»½å°±å¯ä»¥äº†ã€‚æ‰€ä»¥å­˜å‚¨åœ¨ class å¯¹è±¡ä¸­ã€‚ å…ƒç±»å¯¹è±¡ meta-classï¼š1234567//runtimeä¸­ä¼ å…¥ç±»å¯¹è±¡æ­¤æ—¶å¾—åˆ°çš„å°±æ˜¯å…ƒç±»å¯¹è±¡Class objectMetaClass = object_getClass([NSObject class]);// è€Œè°ƒç”¨ç±»å¯¹è±¡çš„classæ–¹æ³•æ—¶å¾—åˆ°è¿˜æ˜¯ç±»å¯¹è±¡ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡éƒ½æ˜¯ç±»å¯¹è±¡Class cls = [[NSObject class] class];Class objectClass3 = [NSObject class];class_isMetaClass(objectMetaClass) // åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦ä¸ºå…ƒç±»å¯¹è±¡NSLog(@&quot;%p %p %p&quot;, objectMetaClass, objectClass3, cls); // åé¢ä¸¤ä¸ªåœ°å€ç›¸åŒï¼Œè¯´æ˜å¤šæ¬¡è°ƒç”¨classå¾—åˆ°çš„è¿˜æ˜¯ç±»å¯¹è±¡ æ¯ä¸ªç±»åœ¨å†…å­˜ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ª meta-class å¯¹è±¡ã€‚meta-class å¯¹è±¡å’Œ class å¯¹è±¡çš„å†…å­˜ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”¨é€”ä¸ä¸€æ ·ï¼Œåœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ isaæŒ‡é’ˆ superclassæŒ‡é’ˆ ç±»çš„ç±»æ–¹æ³•çš„ä¿¡æ¯ï¼ˆclass methodï¼‰ meta-class å¯¹è±¡å’Œ class å¯¹è±¡çš„å†…å­˜ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ meta-class ä¸­ä¹Ÿæœ‰ç±»çš„å±æ€§ä¿¡æ¯ï¼Œç±»çš„å¯¹è±¡æ–¹æ³•ä¿¡æ¯ç­‰æˆå‘˜å˜é‡ï¼Œä½†æ˜¯å…¶ä¸­çš„å€¼å¯èƒ½æ˜¯ç©ºçš„ã€‚ å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼š å½“å¯¹è±¡è°ƒç”¨å®ä¾‹æ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸Šé¢è®²åˆ°ï¼Œå®ä¾‹æ–¹æ³•ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨classç±»å¯¹è±¡ä¸­çš„ï¼Œé‚£ä¹ˆè¦æƒ³æ‰¾åˆ°å®ä¾‹æ–¹æ³•ï¼Œå°±å¿…é¡»æ‰¾åˆ°classç±»å¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ—¶isaçš„ä½œç”¨å°±æ¥äº†ã€‚ 1[stu studentMethod]; instance çš„ isa æŒ‡å‘ class ï¼Œå½“è°ƒç”¨å¯¹è±¡æ–¹æ³•æ—¶ï¼Œé€šè¿‡ instance çš„ isa æ‰¾åˆ° class ï¼Œæœ€åæ‰¾åˆ°å¯¹è±¡æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ã€‚ å½“ç±»å¯¹è±¡è°ƒç”¨ç±»æ–¹æ³•çš„æ—¶å€™ï¼ŒåŒä¸Šï¼Œç±»æ–¹æ³•æ˜¯å­˜å‚¨åœ¨meta-classå…ƒç±»å¯¹è±¡ä¸­çš„ã€‚é‚£ä¹ˆè¦æ‰¾åˆ°ç±»æ–¹æ³•ï¼Œå°±éœ€è¦æ‰¾åˆ°meta-classå…ƒç±»å¯¹è±¡ï¼Œè€Œclassç±»å¯¹è±¡çš„isaæŒ‡é’ˆå°±æŒ‡å‘å…ƒç±»å¯¹è±¡ã€‚ 1[Student studentClassMethod]; class çš„ isa æŒ‡å‘ meta-classå½“è°ƒç”¨ç±»æ–¹æ³•æ—¶ï¼Œé€šè¿‡ class çš„ isa æ‰¾åˆ° meta-class ï¼Œæœ€åæ‰¾åˆ°ç±»æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ å½“å¯¹è±¡è°ƒç”¨å…¶çˆ¶ç±»å¯¹è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œåˆæ˜¯æ€ä¹ˆæ‰¾åˆ°çˆ¶ç±»å¯¹è±¡æ–¹æ³•çš„å‘¢ï¼Ÿï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨åˆ° class ç±»å¯¹è±¡ superclass æŒ‡é’ˆã€‚ 12[stu personMethod];[stu init]; å½“ Student çš„ instance å¯¹è±¡è¦è°ƒç”¨ Person çš„å¯¹è±¡æ–¹æ³•æ—¶ï¼Œä¼šå…ˆé€šè¿‡ isa æ‰¾åˆ° Student çš„ class ï¼Œç„¶åé€šè¿‡ superclass æ‰¾åˆ° Person çš„ class ï¼Œæœ€åæ‰¾åˆ°å¯¹è±¡æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ï¼ŒåŒæ ·å¦‚æœ Person å‘ç°è‡ªå·±æ²¡æœ‰å“åº”çš„å¯¹è±¡æ–¹æ³•ï¼Œåˆä¼šé€šè¿‡ Person çš„ superclass æŒ‡é’ˆæ‰¾åˆ° NSObject çš„ class å¯¹è±¡ï¼Œå»å¯»æ‰¾å“åº”çš„æ–¹æ³• å½“ç±»å¯¹è±¡è°ƒç”¨çˆ¶ç±»çš„ç±»æ–¹æ³•æ—¶ï¼Œå°±éœ€è¦å…ˆé€šè¿‡ isa æŒ‡é’ˆæ‰¾åˆ° meta-class ï¼Œç„¶åé€šè¿‡ superclass å»å¯»æ‰¾å“åº”çš„æ–¹æ³• 12[Student personClassMethod];[Student load]; å½“ Student çš„ class è¦è°ƒç”¨ Person çš„ç±»æ–¹æ³•æ—¶ï¼Œä¼šå…ˆé€šè¿‡ isa æ‰¾åˆ° Student çš„ meta-class ï¼Œç„¶åé€šè¿‡ superclass æ‰¾åˆ° Person çš„ meta-class ï¼Œæœ€åæ‰¾åˆ°ç±»æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ instance çš„ isa æŒ‡å‘ class class çš„ isa æŒ‡å‘ meta-class meta-class çš„ isa æŒ‡å‘åŸºç±»çš„ meta-class ï¼ŒåŸºç±»çš„ isa æŒ‡å‘è‡ªå·± class çš„ superclass æŒ‡å‘çˆ¶ç±»çš„ class ï¼Œå¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼Œsuperclass æŒ‡é’ˆä¸º nil meta-class çš„ superclass æŒ‡å‘çˆ¶ç±»çš„meta-class ï¼ŒåŸºç±»çš„ meta-class çš„ superclass æŒ‡å‘åŸºç±»çš„ class instance è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„è½¨è¿¹ï¼Œisa æ‰¾åˆ°class ï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡ superclass æ‰¾çˆ¶ç±» class è°ƒç”¨ç±»æ–¹æ³•çš„è½¨è¿¹ï¼Œisa æ‰¾ meta-class ï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡ superclass æ‰¾çˆ¶ç±» 7. æ€»ç»“ï¼š ä¸€ä¸ª NSObject å¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Ÿä¸€ä¸ªæŒ‡é’ˆå˜é‡æ‰€å ç”¨çš„å¤§å°ï¼ˆ64bit å  8 ä¸ªå­—èŠ‚ï¼Œ32bit å  4 ä¸ªå­—èŠ‚) å®é™…å› ä¸ºå†…å­˜å¯¹é½ï¼Œç³»ç»Ÿ(64ä½)ä¸ºå¯¹è±¡åˆ†é…çš„å†…å­˜å¤§å°ä¸º16ä¸ªå­—èŠ‚ã€‚ å¯¹è±¡çš„ isa æŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼Ÿinstance å¯¹è±¡çš„ isa æŒ‡é’ˆæŒ‡å‘ class å¯¹è±¡ï¼Œ class å¯¹è±¡çš„ isa æŒ‡é’ˆæŒ‡å‘ meta-class å¯¹è±¡ï¼Œmeta-class å¯¹è±¡çš„ isa æŒ‡é’ˆæŒ‡å‘åŸºç±»çš„ meta-class å¯¹è±¡ï¼ŒåŸºç±»è‡ªå·±çš„ isa æŒ‡é’ˆä¹ŸæŒ‡å‘è‡ªå·±ã€‚ OC çš„ç±»ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿæˆå‘˜å˜é‡çš„å…·ä½“å€¼å­˜æ”¾åœ¨ instance å¯¹è±¡ã€‚å¯¹è±¡æ–¹æ³•ï¼Œåè®®ï¼Œå±æ€§ï¼Œæˆå‘˜å˜é‡ä¿¡æ¯å­˜æ”¾åœ¨ class å¯¹è±¡ã€‚ç±»æ–¹æ³•ä¿¡æ¯å­˜æ”¾åœ¨ meta-class å¯¹è±¡ã€‚","categories":[],"tags":[]},{"title":"ä½¿ç”¨Core MLå¼€å‘åº”ç”¨","slug":"ä½¿ç”¨Core-MLå¼€å‘åº”ç”¨","date":"2019-04-03T08:53:52.000Z","updated":"2019-04-04T08:16:02.740Z","comments":true,"path":"2019/04/03/ä½¿ç”¨Core-MLå¼€å‘åº”ç”¨/","link":"","permalink":"http://yoursite.com/2019/04/03/ä½¿ç”¨Core-MLå¼€å‘åº”ç”¨/","excerpt":"Core ML æ˜¯è‹¹æœåœ¨ WWDC 2017 ä¸­å‘å¸ƒçš„ä¸€æ¬¾æœºå™¨å­¦ä¹ çš„æ¡†æ¶ã€‚é€šè¿‡ä½¿ç”¨è¿™æ¬¾æ¡†æ¶ï¼Œå“ªæ€•æˆ‘ä»¬å¹¶ä¸äº†è§£ç¥ç»ç½‘ç»œå’Œæœºå™¨å­¦ä¹ çš„ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è½»æ¾çš„ä¸ºæˆ‘ä»¬çš„ App æ·»åŠ æœºå™¨å­¦ä¹ çš„èƒ½åŠ›ï¼Œå¹¶ä¸”æ— éœ€ä¸“ç”¨æœåŠ¡å™¨ï¼Œé€šè¿‡ä½¿ç”¨ Mac å³å¯ä»è‡ªå®šä¹‰çš„æ•°æ®ä¸­è®­ç»ƒ Apple çš„æ¨¡å‹ã€‚","text":"Core ML æ˜¯è‹¹æœåœ¨ WWDC 2017 ä¸­å‘å¸ƒçš„ä¸€æ¬¾æœºå™¨å­¦ä¹ çš„æ¡†æ¶ã€‚é€šè¿‡ä½¿ç”¨è¿™æ¬¾æ¡†æ¶ï¼Œå“ªæ€•æˆ‘ä»¬å¹¶ä¸äº†è§£ç¥ç»ç½‘ç»œå’Œæœºå™¨å­¦ä¹ çš„ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è½»æ¾çš„ä¸ºæˆ‘ä»¬çš„ App æ·»åŠ æœºå™¨å­¦ä¹ çš„èƒ½åŠ›ï¼Œå¹¶ä¸”æ— éœ€ä¸“ç”¨æœåŠ¡å™¨ï¼Œé€šè¿‡ä½¿ç”¨ Mac å³å¯ä»è‡ªå®šä¹‰çš„æ•°æ®ä¸­è®­ç»ƒ Apple çš„æ¨¡å‹ã€‚ 1.è·å–æ¨¡å‹ é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„ Core ML æ¨¡å‹ï¼Œå¯é€šè¿‡ å®˜ç½‘ä¸‹è½½ å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œä½¿ç”¨ï¼Œç›®å‰å®˜ç½‘ä¸Šå·²æœ‰ä¸‹åˆ—æ¨¡å‹å¯ä¾›é€‰æ‹©ï¼Œæœ¬æ–‡æ ·ä¾‹ä¸­ä½¿ç”¨çš„æ˜¯ MobileNet ï¼š MobileNetMobileNetsåŸºäºç®€åŒ–çš„ä½“ç³»ç»“æ„ï¼Œå…·æœ‰æ·±åº¦å¯åˆ†ç¦»çš„å·ç§¯ï¼Œä»¥æ„å»ºè½»é‡çº§ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œã€‚ä»ä¸€ç»„1000ä¸ªç±»åˆ«ï¼ˆä¾‹å¦‚æ ‘æœ¨ï¼ŒåŠ¨ç‰©ï¼Œé£Ÿç‰©ï¼Œè½¦è¾†ï¼Œäººå‘˜ç­‰ï¼‰ä¸­æ£€æµ‹å›¾åƒä¸­å­˜åœ¨çš„ä¸»è¦å¯¹è±¡ã€‚ SqueezeNetä»ä¸€ç»„1000ä¸ªç±»åˆ«ï¼ˆä¾‹å¦‚æ ‘æœ¨ï¼ŒåŠ¨ç‰©ï¼Œé£Ÿç‰©ï¼Œè½¦è¾†ï¼Œäººå‘˜ç­‰ï¼‰ä¸­æ£€æµ‹å›¾åƒä¸­å­˜åœ¨çš„ä¸»è¦å¯¹è±¡ã€‚SqueezeNetçš„æ€»ä½“å ç”¨ç©ºé—´ä»…ä¸º5 MBï¼Œå…¶ç²¾åº¦ä¸AlexNetç›¸ä¼¼ï¼Œä½†å‚æ•°å‡å°‘äº†50å€ã€‚ Places205-GoogLeNetä»205ä¸ªç±»åˆ«ä¸­æ£€æµ‹å›¾åƒçš„åœºæ™¯ï¼Œä¾‹å¦‚æœºåœºèˆªç«™æ¥¼ï¼Œå§å®¤ï¼Œæ£®æ—ï¼Œæµ·å²¸ç­‰ã€‚ ResNet50ä»ä¸€ç»„1000ä¸ªç±»åˆ«ï¼ˆä¾‹å¦‚æ ‘æœ¨ï¼ŒåŠ¨ç‰©ï¼Œé£Ÿç‰©ï¼Œè½¦è¾†ï¼Œäººå‘˜ç­‰ï¼‰ä¸­æ£€æµ‹å›¾åƒä¸­å­˜åœ¨çš„ä¸»è¦å¯¹è±¡ã€‚ Inception v3ä»ä¸€ç»„1000ä¸ªç±»åˆ«ï¼ˆä¾‹å¦‚æ ‘æœ¨ï¼ŒåŠ¨ç‰©ï¼Œé£Ÿç‰©ï¼Œè½¦è¾†ï¼Œäººå‘˜ç­‰ï¼‰ä¸­æ£€æµ‹å›¾åƒä¸­å­˜åœ¨çš„ä¸»è¦å¯¹è±¡ã€‚ VGG16ä»ä¸€ç»„1000ä¸ªç±»åˆ«ï¼ˆä¾‹å¦‚æ ‘æœ¨ï¼ŒåŠ¨ç‰©ï¼Œé£Ÿç‰©ï¼Œè½¦è¾†ï¼Œäººå‘˜ç­‰ï¼‰ä¸­æ£€æµ‹å›¾åƒä¸­å­˜åœ¨çš„ä¸»è¦å¯¹è±¡ã€‚ 2.æ­å»ºç•Œé¢æ‰“å¼€ Xcode (æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ Xcode10.2 swift4.2)ï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé€‰æ‹© Single View App ï¼Œç„¶åå®ç°å¦‚ä¸‹ç•Œé¢ï¼š å®ç° æ‰“å¼€ç›¸æœº å’Œ æ‰“å¼€å›¾åº“ çš„åŠŸèƒ½ï¼Œå¹¶åœ¨ info.plist æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„æƒé™è¯´æ˜ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223/// æ‰“å¼€ç›¸æœºè¿›è¡Œæ‹ç…§@IBAction func capturePhoto(_ sender: Any) &#123; if (!UIImagePickerController.isSourceTypeAvailable(.camera)) &#123; self.alert(msg: &quot;æŠ±æ­‰ï¼Œæ— æ³•ä½¿ç”¨ç›¸æœºï¼&quot;) return &#125; let cameraPicker = UIImagePickerController() cameraPicker.delegate = self cameraPicker.sourceType = .camera cameraPicker.allowsEditing = false present(cameraPicker, animated: true, completion: nil) &#125; /// æ‰“å¼€å›¾åº“é€‰å–å›¾ç‰‡@IBAction func openPhotoLibrary(_ sender: Any) &#123; let cameraPicker = UIImagePickerController() cameraPicker.delegate = self cameraPicker.sourceType = .photoLibrary cameraPicker.allowsEditing = false present(cameraPicker, animated: true, completion: nil) &#125; å¦å¤–éœ€è¦å®ç°ä»£ç†æ–¹æ³•æ¥è·å¾—è·å–çš„å›¾ç‰‡ï¼Œä»£ç†æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516// MARK: - UIImagePickerControllerDelegateextension ViewController: UIImagePickerControllerDelegate &#123; func imagePickerControllerDidCancel(_ picker: UIImagePickerController) &#123; dismiss(animated: true, completion: nil) &#125; func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) &#123; picker.dismiss(animated: true, completion: nil) guard let img = info[UIImagePickerController.InfoKey.originalImage] as? UIImage else &#123; return &#125; analyzingImage(img: img) &#125;&#125; 3.æ·»åŠ æ¨¡å‹æ–‡ä»¶åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª Model ç›®å½•ï¼Œå¹¶å°†ä¸‹è½½å¥½çš„ Core ML æ¨¡å‹æ–‡ä»¶åŠ å…¥åˆ°è¯¥ç›®å½•ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š ç„¶åå°±å¯ä»¥åœ¨ Xcode ä¸­æŸ¥çœ‹è¯¥æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯äº†ï¼š ç”±æ­¤æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ¨¡å‹ MobileNet éœ€è¦çš„è¾“å…¥ä¸º 224x224 å¤§å°çš„å›¾ç‰‡æ•°æ®ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯å›¾ç‰‡æœ€æœ‰å¯èƒ½å±äºçš„ç±»åˆ«å’Œæ‰€æœ‰å¯èƒ½ç±»åˆ«çš„æ¦‚ç‡ï¼Œä¸”è¯¥æ¨¡å‹ä¼šè‡ªåŠ¨ç”Ÿæˆåç§°ä¸º MobileNet çš„ Swift æ¨¡å‹ç±»æ–‡ä»¶ï¼Œä¸”å¯ä»¥é€šè¿‡ç‚¹å‡»æ¨¡å‹æ–‡ä»¶ä¿¡æ¯ä¸­ Model Class å±æ€§çš„ç®­å¤´æŸ¥çœ‹æ¨¡å‹ç±»æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚ 4.å¤„ç†è¾“å…¥æ•°æ®ç”±ä¸Šä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬çŸ¥é“æ¨¡å‹ MobileNet éœ€è¦çš„æ˜¯å¤§å°ä¸º 224x224 çš„å›¾ç‰‡è¾“å…¥ï¼Œå› æ­¤åœ¨ä½¿ç”¨è¯¥æ¨¡å‹å‰æˆ‘ä»¬éœ€è¦å¯¹æˆ‘ä»¬è·å–çš„å›¾ç‰‡è¿›è¡Œä¸€äº›å¤„ç†ï¼Œå¦‚æœè¾“å…¥å›¾ç‰‡ä¸ç¬¦åˆè¯¥æ¡ä»¶ï¼Œé‚£ä¹ˆåœ¨å¤„ç†çš„æ—¶å€™å°†ä¼šæŠ¥é”™ï¼Œä¸”æˆ‘ä»¬ä¹Ÿæ— æ³•è·å–åˆ°æ¨¡å‹é¢„æµ‹çš„ç»“æœã€‚ è½¬æ¢å›¾ç‰‡çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/// è°ƒæ•´å›¾ç‰‡å¤§å°////// - Parameters:/// - size: å›¾ç‰‡å¤§å°/// - block: å›è°ƒï¼ˆè·å–è°ƒæ•´åçš„UIImageå¯¹è±¡å’Œåƒç´ å›¾ç‰‡æ•°æ®ï¼‰func resize(size:CGSize, block:ResizePixelBufferBlock) -&gt; Void &#123; UIGraphicsBeginImageContextWithOptions(size, true, UIScreen.main.scale) draw(in: CGRect.init(origin: CGPoint.zero, size: size)) let newImg = UIGraphicsGetImageFromCurrentImageContext()! UIGraphicsEndImageContext() let attrs = [ kCVPixelBufferCGImageCompatibilityKey:kCFBooleanTrue, kCVPixelBufferCGBitmapContextCompatibilityKey:kCFBooleanTrue, ] as CFDictionary var pixelBuffer : CVPixelBuffer? let status = CVPixelBufferCreate(kCFAllocatorDefault, Int(newImg.size.width), Int(newImg.size.height), kCVPixelFormatType_32ARGB, attrs, &amp;pixelBuffer) guard kCVReturnSuccess == status, let pBuffer = pixelBuffer else &#123; print(&quot;è½¬æ¢å¤±è´¥!&quot;) block(nil,nil) return &#125; CVPixelBufferLockBaseAddress(pBuffer, CVPixelBufferLockFlags.init(rawValue: 0)) let pixelData = CVPixelBufferGetBaseAddress(pBuffer) let rgbColorSpace = CGColorSpaceCreateDeviceRGB() let context = CGContext(data: pixelData, width: Int(newImg.size.width), height: Int(newImg.size.height), bitsPerComponent: 8, bytesPerRow: CVPixelBufferGetBytesPerRow(pBuffer), space: rgbColorSpace, bitmapInfo: CGImageAlphaInfo.noneSkipFirst.rawValue) context?.translateBy(x: 0, y: newImg.size.height) context?.scaleBy(x: 1.0, y: -1.0) guard nil != context else &#123; print(&quot;è½¬æ¢å¤±è´¥!&quot;) block(nil,nil) return &#125; UIGraphicsPushContext(context!) newImg.draw(in: CGRect(origin: CGPoint.zero, size: newImg.size)) UIGraphicsPopContext() CVPixelBufferUnlockBaseAddress(pBuffer, CVPixelBufferLockFlags(rawValue: 0)) block(newImg,pBuffer) &#125; 5.ä½¿ç”¨æ¨¡å‹æ–‡ä»¶ä½¿ç”¨æ–¹æ³•éå¸¸ç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617/// åˆ†æè·å–åˆ°çš„å›¾ç‰‡func analyzingImage(img:UIImage) &#123; let size = CGSize(width: 224.0, height: 224.0) img.resize(size: size, block: &#123; (img, pixelBuffer) in imageView.image = img guard let pBuffer = pixelBuffer else &#123; return &#125; // åˆ›å»ºæ¨¡å‹çš„å¯¹è±¡ let model:MobileNet = MobileNet() guard let mobileOutput = try? model.prediction(image: pBuffer) else &#123; return &#125; infoLabel.text = &quot;\\(mobileOutput.classLabel)&quot; &#125;)&#125; ç„¶åå°±è·å–åˆ°ä½¿ç”¨æ¨¡å‹é¢„æµ‹çš„ç»“æœäº†ï¼Œæœ€ç»ˆæ•ˆæœå›¾å¦‚ä¸‹ï¼š","categories":[],"tags":[]},{"title":"PlistBuddyçš„åŸºæœ¬ä½¿ç”¨","slug":"PlistBuddyçš„åŸºæœ¬ä½¿ç”¨","date":"2018-11-16T09:47:44.000Z","updated":"2018-11-19T10:07:19.000Z","comments":true,"path":"2018/11/16/PlistBuddyçš„åŸºæœ¬ä½¿ç”¨/","link":"","permalink":"http://yoursite.com/2018/11/16/PlistBuddyçš„åŸºæœ¬ä½¿ç”¨/","excerpt":"PlistBuddyæ˜¯Macè‡ªå¸¦çš„ç”¨äºè§£æplistæ–‡ä»¶çš„å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å®ç°åœ¨ç»ˆç«¯ä¸­è¯»å†™plistæ–‡ä»¶ã€‚","text":"PlistBuddyæ˜¯Macè‡ªå¸¦çš„ç”¨äºè§£æplistæ–‡ä»¶çš„å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å®ç°åœ¨ç»ˆç«¯ä¸­è¯»å†™plistæ–‡ä»¶ã€‚ 1.æŸ¥çœ‹å¸®åŠ©è¯¥å·¥å…·éœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥å¼•ç”¨ï¼ŒæŸ¥çœ‹å‘½ä»¤å¸®åŠ©æ–¹å¼å¦‚ä¸‹ï¼š 1/usr/libexec/PlistBuddy --help ç»ˆç«¯å°†ä¼šæ‰“å°å‡ºè¯¥å·¥å…·çš„å‘½ä»¤ä»‹ç»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2.ç®€å•ä½¿ç”¨1.æ‰“å°æ‰“å°plistæ–‡ä»¶ä¿¡æ¯å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1/usr/libexec/PlistBuddy -c &quot;print&quot; 1.plist å¦‚æœéœ€è¦æ‰“å°æŒ‡å®šå­—æ®µæˆ–è€…æŒ‡å®šç´¢å¼•çš„å€¼å¯ä»¥å‚è€ƒå¦‚ä¸‹å‘½ä»¤æ–¹å¼ï¼Œæ‰“å°æ ¹Arrayç¬¬0ä¸ªå…ƒç´ Dictionaryçš„titleå­—æ®µï¼š 1/usr/libexec/PlistBuddy -c &quot;print :0:title&quot; 1.plist 2.æ·»åŠ å¦‚ä¸‹æ‰€ç¤ºå‘½ä»¤ä¸ºå‘æ ¹Arrayç¬¬0ä¸ªå…ƒç´ Dictionaryä¸­æ·»åŠ å­—æ®µä¸ºversionï¼Œå€¼ä¸º1.0çš„æ•°æ®ï¼š 1/usr/libexec/PlistBuddy -c &quot;Add :0:version string 1.0&quot; 1.plist æ·»åŠ åçš„ç»“æœå¦‚ä¸‹å›¾ï¼š å¦‚æœéœ€è¦æ·»åŠ ä¸€ä¸ªArrayç±»å‹çš„æ•°æ®æˆ–è€…Dictionaryç±»å‹çš„æ•°æ®å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤å…ˆè¡Œåˆ›å»ºArrayæˆ–è€…Dictionaryç±»å‹çš„æ•°æ®åå†å‘å…¶ä¸­æ·»åŠ å€¼ï¼š 1234# æ·»åŠ Arrayæ•°æ®/usr/libexec/PlistBuddy -c &apos;Add :2 Array&apos; 1.plist# æ·»åŠ Dictionaryç±»å‹æ•°æ®/usr/libexec/PlistBuddy -c &apos;Add :3 dict&apos; 1.plist æ·»åŠ åçš„ç»“æœå¦‚ä¸‹å›¾ï¼š 3.åˆ é™¤å¦‚ä¸‹æ‰€ç¤ºå‘½ä»¤ä¸ºåˆ é™¤æ ¹Arrayä¸­çš„ç¬¬2ä¸ªå…ƒç´  1/usr/libexec/PlistBuddy -c &apos;Delete :2&apos; 1.plist åˆ é™¤åçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸‹æ‰€ç¤ºå‘½ä»¤ä¸ºåˆ é™¤æ ¹Arrayä¸­ç¬¬0ä¸ªå…ƒç´ Dictionaryä¸­çš„å­—æ®µä¸ºnumberçš„æ•°æ®ï¼š 1/usr/libexec/PlistBuddy -c &apos;Delete :0:number&apos; 1.plist åˆ é™¤åç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 4.ä¿®æ”¹å¦‚ä¸‹æ‰€ç¤ºå‘½ä»¤ä¸ºä¿®æ”¹Arrayç¬¬0ä¸ªå…ƒç´ Dictionaryä¸­çš„å­—æ®µä¸ºversionçš„æ•°æ®ï¼š 1/usr/libexec/PlistBuddy -c &apos;Set :0:version &quot;2.0&quot;&apos; 1.plist ä¿®æ”¹åç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 5.åˆå¹¶ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆå¹¶1.pliståˆ°2.plistæ–‡ä»¶ä¸­ 1/usr/libexec/PlistBuddy -c &apos;Merge 1.plist&apos; 2.plist åˆå¹¶å‰ä¸åˆå¹¶åçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š","categories":[],"tags":[]},{"title":"Macç»ˆç«¯å‹ç¼©è§£å‹å‘½ä»¤æ”¶é›†","slug":"Macç»ˆç«¯å‹ç¼©è§£å‹å‘½ä»¤æ”¶é›†","date":"2018-11-02T01:52:19.000Z","updated":"2018-11-02T02:11:05.000Z","comments":true,"path":"2018/11/02/Macç»ˆç«¯å‹ç¼©è§£å‹å‘½ä»¤æ”¶é›†/","link":"","permalink":"http://yoursite.com/2018/11/02/Macç»ˆç«¯å‹ç¼©è§£å‹å‘½ä»¤æ”¶é›†/","excerpt":"æœ¬æ–‡æ”¶é›†äº†ä¸€äº›Macç»ˆç«¯ä¸‹å¸¸ç”¨çš„å‹ç¼©è§£å‹æ–‡ä»¶å‘½ä»¤ï¼Œä»¥ä¾›æŸ¥é˜…ã€‚","text":"æœ¬æ–‡æ”¶é›†äº†ä¸€äº›Macç»ˆç«¯ä¸‹å¸¸ç”¨çš„å‹ç¼©è§£å‹æ–‡ä»¶å‘½ä»¤ï¼Œä»¥ä¾›æŸ¥é˜…ã€‚ tarè§£åŒ…ï¼štar xvf FileName.taræ‰“åŒ…ï¼štar cvf FileName.tar DirNameï¼ˆæ³¨ï¼štaræ˜¯æ‰“åŒ…ï¼Œä¸æ˜¯å‹ç¼©ï¼ï¼‰â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.gzè§£å‹1ï¼šgunzip FileName.gzè§£å‹2ï¼šgzip -d FileName.gzå‹ç¼©ï¼šgzip FileName.tar.gz å’Œ .tgzè§£å‹ï¼štar zxvf FileName.tar.gzå‹ç¼©ï¼štar zcvf FileName.tar.gz DirNameâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.bz2è§£å‹1ï¼šbzip2 -d FileName.bz2è§£å‹2ï¼šbunzip2 FileName.bz2å‹ç¼©ï¼š bzip2 -z FileName.tar.bz2è§£å‹ï¼štar jxvf FileName.tar.bz2å‹ç¼©ï¼štar jcvf FileName.tar.bz2 DirNameâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.bzè§£å‹1ï¼šbzip2 -d FileName.bzè§£å‹2ï¼šbunzip2 FileName.bzå‹ç¼©ï¼šæœªçŸ¥.tar.bzè§£å‹ï¼štar jxvf FileName.tar.bzå‹ç¼©ï¼šæœªçŸ¥â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.Zè§£å‹ï¼šuncompress FileName.Zå‹ç¼©ï¼šcompress FileName.tar.Zè§£å‹ï¼štar Zxvf FileName.tar.Zå‹ç¼©ï¼štar Zcvf FileName.tar.Z DirNameâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.zipè§£å‹ï¼šunzip FileName.zipå‹ç¼©ï¼šzip FileName.zip DirNameâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.rarè§£å‹ï¼šrar x FileName.rarå‹ç¼©ï¼šrar a FileName.rar DirNameâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.lhaè§£å‹ï¼šlha -e FileName.lhaå‹ç¼©ï¼šlha -a FileName.lha FileNameâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.rpmè§£åŒ…ï¼šrpm2cpio FileName.rpm | cpio -divâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.debè§£åŒ…ï¼šar p FileName.deb data.tar.gz | tar zxf -â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”.tar .tgz .tar.gz .tar.Z .tar.bz .tar.bz2 .zip .cpio .rpm .deb .slp .arj .rar .ace .lha .lzh .lzx .lzs .arc .sda .sfx .lnx .zoo .cab .kar .cpt .pit .sit .seaè§£å‹ï¼šsEx x FileName.å‹ç¼©ï¼šsEx a FileName. FileName sExåªæ˜¯è°ƒç”¨ç›¸å…³ç¨‹åºï¼Œæœ¬èº«å¹¶æ— å‹ç¼©ã€è§£å‹åŠŸèƒ½ï¼Œè¯·æ³¨æ„ï¼gzip å‘½ä»¤å‡å°‘æ–‡ä»¶å¤§å°æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„å¥½å¤„ï¼Œä¸€æ˜¯å¯ä»¥å‡å°‘å­˜å‚¨ç©ºé—´ï¼ŒäºŒæ˜¯é€šè¿‡ç½‘ç»œä¼ è¾“æ–‡ä»¶æ—¶ï¼Œå¯ä»¥å‡å°‘ä¼ è¾“çš„æ—¶é—´ã€‚gzip æ˜¯åœ¨ Linux ç³»ç»Ÿä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©å’Œè§£å‹ç¼©çš„å‘½ä»¤ï¼Œæ—¢æ–¹ä¾¿åˆå¥½ç”¨ã€‚è¯­æ³•ï¼šgzip [é€‰é¡¹] å‹ç¼©ï¼ˆè§£å‹ç¼©ï¼‰çš„æ–‡ä»¶åè¯¥å‘½ä»¤çš„å„é€‰é¡¹å«ä¹‰å¦‚ä¸‹ï¼š-c å°†è¾“å‡ºå†™åˆ°æ ‡å‡†è¾“å‡ºä¸Šï¼Œå¹¶ä¿ç•™åŸæœ‰æ–‡ä»¶ã€‚-d å°†å‹ç¼©æ–‡ä»¶è§£å‹ã€‚-l å¯¹æ¯ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œæ˜¾ç¤ºä¸‹åˆ—å­—æ®µï¼š å‹ç¼©æ–‡ä»¶çš„å¤§å°ï¼›æœªå‹ç¼©æ–‡ä»¶çš„å¤§å°ï¼›å‹ç¼©æ¯”ï¼›æœªå‹ç¼©æ–‡ä»¶çš„åå­—-r é€’å½’å¼åœ°æŸ¥æ‰¾æŒ‡å®šç›®å½•å¹¶å‹ç¼©å…¶ä¸­çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ˜¯è§£å‹ç¼©ã€‚-t æµ‹è¯•ï¼Œæ£€æŸ¥å‹ç¼©æ–‡ä»¶æ˜¯å¦å®Œæ•´ã€‚-v å¯¹æ¯ä¸€ä¸ªå‹ç¼©å’Œè§£å‹çš„æ–‡ä»¶ï¼Œæ˜¾ç¤ºæ–‡ä»¶åå’Œå‹ç¼©æ¯”ã€‚-num ç”¨æŒ‡å®šçš„æ•°å­— num è°ƒæ•´å‹ç¼©çš„é€Ÿåº¦ï¼Œ-1 æˆ– â€“fast è¡¨ç¤ºæœ€å¿«å‹ç¼©æ–¹æ³•ï¼ˆä½å‹ç¼©æ¯”ï¼‰ï¼Œ-9 æˆ–â€“bestè¡¨ç¤ºæœ€æ…¢å‹ç¼©æ–¹æ³•ï¼ˆé«˜å‹ç¼©æ¯”ï¼‰ã€‚ç³»ç»Ÿç¼ºçœå€¼ä¸º 6ã€‚æŒ‡ä»¤å®ä¾‹ï¼šgzip % æŠŠå½“å‰ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶å‹ç¼©æˆ .gz æ–‡ä»¶ã€‚gzip -dv % æŠŠå½“å‰ç›®å½•ä¸‹æ¯ä¸ªå‹ç¼©çš„æ–‡ä»¶è§£å‹ï¼Œå¹¶åˆ—å‡ºè¯¦ç»†çš„ä¿¡æ¯ã€‚gzip -l *% è¯¦ç»†æ˜¾ç¤ºä¾‹1ä¸­æ¯ä¸ªå‹ç¼©çš„æ–‡ä»¶çš„ä¿¡æ¯ï¼Œå¹¶ä¸è§£å‹ã€‚gzip usr.tar% å‹ç¼© tar å¤‡ä»½æ–‡ä»¶ usr.tarï¼Œæ­¤æ—¶å‹ç¼©æ–‡ä»¶çš„æ‰©å±•åä¸º.tar.gzã€‚","categories":[],"tags":[]},{"title":"æ­å»ºcocoapodsç§æœ‰åº“","slug":"æ­å»ºcocoapodsç§æœ‰åº“","date":"2018-10-29T07:55:02.000Z","updated":"2019-03-25T06:51:37.084Z","comments":true,"path":"2018/10/29/æ­å»ºcocoapodsç§æœ‰åº“/","link":"","permalink":"http://yoursite.com/2018/10/29/æ­å»ºcocoapodsç§æœ‰åº“/","excerpt":"Cocoapods æ˜¯ä¸€æ¬¾swiftå’ŒObjective-Cé¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨Cocoapodsæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç®¡ç†é¡¹ç›®ä¸­çš„ä¾èµ–åº“ï¼Œæœ¬æ–‡å°†ä¼šä»‹ç»Cocoapodsç§æœ‰åº“çš„åˆ›å»ºå’Œä½¿ç”¨ã€‚","text":"Cocoapods æ˜¯ä¸€æ¬¾swiftå’ŒObjective-Cé¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨Cocoapodsæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç®¡ç†é¡¹ç›®ä¸­çš„ä¾èµ–åº“ï¼Œæœ¬æ–‡å°†ä¼šä»‹ç»Cocoapodsç§æœ‰åº“çš„åˆ›å»ºå’Œä½¿ç”¨ã€‚ 1.åˆ›å»ºåˆ›å»ºç‰ˆæœ¬åº“ä½¿ç”¨GitHubæˆ–è€…ç äº‘åˆ›å»ºä¸€ä¸ªæ–°çš„è¿œç¨‹Gitä»“åº“ï¼Œåˆ›å»ºå¥½ä»“åº“åä½¿ç”¨ç»ˆç«¯å‘½ä»¤å°†è¯¥ä»“åº“æ·»åŠ åˆ°æœ¬åœ°çš„ç‰ˆæœ¬ä»“åº“é…ç½®ä¸­ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹: 1pod repo add RepoName url å…¶ä¸­RepoNameä¸ºç§æœ‰åº“çš„åå­—(è‡ªè¡Œå‘½å)ï¼Œurl ä¸ºåˆ›å»ºçš„ä»“åº“çš„åœ°å€ã€‚åˆ›å»ºå¥½ä¹‹ååœ¨Finderä¸‹æŸ¥çœ‹ç›®å½•~/.cocoapods/repo å¯ä»¥æŸ¥çœ‹åˆ°ç§æœ‰åº“åç§°å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°Cocoapodsçš„ä»“åº“é…ç½®åˆ—è¡¨ä¸­å·²ç»å­˜åœ¨æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ç§æœ‰åº“é…ç½®ï¼š 1pod repo list å¦‚éœ€ç§»é™¤å¤šä½™çš„åº“å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ 1pod repo remove RepoName åˆ›å»ºä»£ç åº“åŒæ ·æ–°å»ºä¸€ä¸ªè¿œç¨‹çš„Gitä»“åº“ï¼ŒåŒæ—¶æ·»åŠ å¥½Licenseæ–‡ä»¶å’ŒREADMEæ–‡ä»¶ï¼Œå°†è‡ªå·±çš„ä»£ç æ·»åŠ å¹¶æ¨é€åˆ°è¯¥è¿œç¨‹ä»“åº“ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºpodæè¿°æ–‡ä»¶ï¼š 1pod spec create &lt;LibName&gt; å‘½ä»¤ä¸­çš„LibNameæ›¿æ¢æˆè‡ªå·±ç§æœ‰ç»„ä»¶æˆ–æ¨¡å—çš„åç§°ï¼Œpodspecæ–‡ä»¶å‚è€ƒå¦‚ä¸‹æ¨¡æ¿è¿›è¡Œé…ç½®: 12345678910111213Pod::Spec.new do |s| s.name = &apos;LibName&apos; s.version = &apos;0.0.1&apos; s.summary = &apos;Libæè¿°&apos; s.license = &#123;:type =&gt; &quot;MIT&quot;, :file =&gt; &quot;LICENSE&quot;&#125; s.homepage = &quot;ä»£ç ä»“åº“ä¸»é¡µçš„åœ°å€&quot; s.authors = &#123; &apos;test&apos; =&gt; &apos;test@qq.com&apos; &#125; #ä½œè€…ä¿¡æ¯ s.source = &#123; :git =&gt; &quot;https://test.git&quot;, :tag =&gt; &quot;#&#123;s.version&#125;&quot; &#125; #ä»“åº“åœ°å€ s.source_files = &apos;Lib/*.&#123;h,m&#125;&apos; #ä»£ç ä½ç½® s.ios.deployment_target = &apos;8.0&apos; #æ”¯æŒçš„iOSç‰ˆæœ¬ s.frameworks = &quot;UIKit&quot; #éœ€è¦ä½¿ç”¨çš„æ¡†æ¶ s.dependency &quot;Masonry&quot; #ä¾èµ–çš„ç¬¬ä¸‰æ–¹ end ç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤éªŒè¯podspecæ–‡ä»¶é…ç½®æ˜¯å¦æ­£ç¡®ã€‚ 1234# æœ¬åœ°éªŒè¯pod lib lint LibName.podspec# è¿œç¨‹éªŒè¯pod spec lint LibName.podspec å¦‚æœ‰é”™è¯¯ï¼Œæ ¹æ®æç¤ºä¿®æ”¹ï¼Œæˆ–è€…å‚æ•° --allow-warnings æˆ– --use-libraries è¿›è¡Œå°è¯•ã€‚ éªŒè¯é€šè¿‡åå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¨é€åˆ°ç§æœ‰åº“ä¸­ 1pod repo push RepoName LibName.podspec 2.ä½¿ç”¨åœ¨Podfileæ–‡ä»¶ä¸­æ·»åŠ ä¸Šå¦‚ä¸‹é…ç½® 1234567# Cocoapodså®˜æ–¹åº“åœ°å€source &apos;https://github.com/CocoaPods/Specs.git&apos;source &apos;ç§æœ‰åº“åœ°å€&apos; target &apos;targetName&apos; do pod &apos;ç§æœ‰åº“åç§°&apos;end ç„¶åä½¿ç”¨ install å‘½ä»¤ æˆ–è€… update å‘½ä»¤è¿›è¡Œæ“ä½œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚","categories":[],"tags":[]},{"title":"ä½¿ç”¨Hexoæ­å»ºè‡ªå·±çš„åšå®¢","slug":"ä½¿ç”¨Hexoæ­å»ºè‡ªå·±çš„åšå®¢","date":"2018-09-26T12:23:39.000Z","updated":"2018-10-29T06:44:56.000Z","comments":true,"path":"2018/09/26/ä½¿ç”¨Hexoæ­å»ºè‡ªå·±çš„åšå®¢/","link":"","permalink":"http://yoursite.com/2018/09/26/ä½¿ç”¨Hexoæ­å»ºè‡ªå·±çš„åšå®¢/","excerpt":"Hexo æ˜¯åŸºäºNode.jsçš„ä¸€æ¬¾å¿«é€Ÿã€é—´æ¥ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œæ”¯æŒMarkdownï¼Œå¯æ›´æ¢ä¸»é¢˜ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚","text":"Hexo æ˜¯åŸºäºNode.jsçš„ä¸€æ¬¾å¿«é€Ÿã€é—´æ¥ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œæ”¯æŒMarkdownï¼Œå¯æ›´æ¢ä¸»é¢˜ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚ Hexoå®˜ç½‘ å‡†å¤‡ Node.js Hexo Git GitHubè´¦å· å®‰è£…Node.js ç‚¹å‡» é“¾æ¥ åˆ°Node.jså®˜ç½‘ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…ç¨‹åºå³å¯å®‰è£…ã€‚ å®‰è£…Hexo æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨npmå®‰è£…Hexoã€‚ 1npm install -g hexo-cli å®‰è£…Git Windowsä¸‹è½½å¹¶å®‰è£… Git Macä½¿ç”¨Homebrewï¼šbrew install git ï¼›æˆ–ä¸‹è½½ å®‰è£…ç¨‹åº å®‰è£…ã€‚ é…ç½®GitHubä»“åº“ æ³¨å†Œä¸€ä¸ª GitHub è´¦å· åˆ›å»ºä¸€ä¸ªGitHubä»“åº“æ–°ä»“åº“åä½¿ç”¨ â€œUserNameâ€+â€œgithub.ioâ€ çš„æ ¼å¼å‘½åï¼Œä¹‹åè®¿é—®çš„åŸŸåå°±ä¼šæ˜¯ https://UserName.github.io çš„å½¢å¼ å¼€å¯GitHub PageæœåŠ¡åœ¨ä»“åº“çš„ Settings ä¸­æ‰¾åˆ° GitHub Pages é…ç½®ï¼Œå¹¶ç‚¹å‡» Choose a theme ä»»æ„é€‰æ‹©ä¸€ä¸ªä¸»é¢˜ï¼Œæ­¤æ—¶ä¼šè·³è½¬åˆ°ä»“åº“ï¼Œç„¶åæˆ‘ä»¬å†æŸ¥çœ‹ Settings å°±å¯ä»¥çœ‹è§å¼€å¯ GitHub Pages ä¹‹åå¾—åˆ°çš„åŸŸåï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥åŸŸåè¿›è¡Œè®¿é—®äº† å¼€å§‹ä½¿ç”¨Hexo1.å»ºç«‹æœ¬åœ°ç«™ç‚¹ é¦–å…ˆåœ¨ä½ æƒ³è¦ç”¨äºå­˜æ”¾ç«™ç‚¹çš„ç›®å½•ä½ç½®ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1hexo init &lt;folder&gt; æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes _config.yml æ–‡ä»¶ä¸ºç«™ç‚¹çš„é…ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œå¯ä»¥ç”¨äºä¿®æ”¹ä¸€äº›ç½‘ç«™å‚æ•°ï¼Œè¯¦ç»†çš„é…ç½®å‚æ•°å¯ä»¥å‚è€ƒHexoå®˜ç½‘çš„ æ–‡æ¡£ã€‚ package.jsonæ–‡ä»¶ä¸ºç«™ç‚¹çš„ä¾èµ–é…ç½®æ–‡ä»¶ï¼ŒEJSï¼ŒStylus å’Œ Markdown render å·²é»˜è®¤å®‰è£…ã€‚ scaffoldsä¸ºæ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexoä¼šæ ¹æ®scaffoldæ¥å»ºç«‹æ–‡ä»¶ã€‚Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„markdownæ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚ sourceä¸ºç”¨æˆ·èµ„æºå­˜æ”¾æ–‡ä»¶å¤¹ï¼Œé™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚ themesä¸ºä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾Hexoçš„ä¸»é¢˜æ–‡ä»¶ï¼ŒHexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ 2.å¯ç”¨æœ¬åœ°ç«™ç‚¹ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆé™æ€æ–‡ä»¶ 1hexo generate è¯¥å‘½ä»¤å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‚æ•° é€‰é¡¹ æè¿° -d, â€“deploy æ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™ -w, â€“watch ç›‘è§†æ–‡ä»¶å˜åŠ¨ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼šhttp://localhost:4000 ã€‚ 1hexo server é€‰é¡¹ æè¿° -p, --port é‡è®¾ç«¯å£ -s, --static åªä½¿ç”¨é™æ€æ–‡ä»¶ -l, --log å¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼ 3.å…³è”GitHubç¼–è¾‘æœ¬åœ°hexoç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ä¸‹çš„deployé…ç½®ï¼Œè®¾ç½®éƒ¨ç½²ä½ç½®ï¼Œå¦‚ä¸‹ï¼š 12345deploy: type: git repository: &lt;repository url&gt; branch: [branch] message: [message] å‚æ•° æè¿° repo åº“ï¼ˆRepositoryï¼‰åœ°å€ branch åˆ†æ”¯åç§°ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ GitHub æˆ–è€… GitCafe çš„è¯ï¼Œç¨‹åºä¼šå°è¯•è‡ªåŠ¨æ£€æµ‹ã€‚ message è‡ªå®šä¹‰æäº¤ä¿¡æ¯ï¼ˆé»˜è®¤ä¸º Site updated: YYYY-MM-DD HH:mm:ssï¼‰ ç„¶åå¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¼€å§‹éƒ¨ç½² 1hexo deploy å‚æ•° æè¿° -g, --generate éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶ éƒ¨ç½²å®Œæˆåå°±å¯ä»¥ä½¿ç”¨ https://UserName.github.io è¿›è¡Œè®¿é—®æŸ¥çœ‹æ•ˆæœäº†ã€‚ 4.æ–°å»ºä¸€ç¯‡åšå®¢ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ–°å»ºä¸€ç¯‡åšå®¢ï¼š 1hexo new post &quot;åšå®¢æ–‡ç« å&quot; åœ¨ç”ŸæˆåŠéƒ¨ç½²æ–‡ç« ä¹‹å‰éœ€è¦å®‰è£…ä¸€ä¸ªæ‰©å±•ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š 1npm install hexo-deployer-git --save ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘å¥½æ–‡ç« åä½¿ç”¨å‘½ä»¤ï¼šhexo d -g ç”Ÿæˆå¹¶éƒ¨ç½²ï¼Œå®Œæˆä¹‹åä½¿ç”¨ https://UserName.github.io è®¿é—®å°±å¯ä»¥æŸ¥çœ‹åˆ°æ–°ç”Ÿæˆçš„æ–‡ç« äº†ã€‚ 5.æ›´æ¢ä¸»é¢˜é¦–å…ˆåœ¨Hexoçš„å®˜æ–¹ ä¸»é¢˜å¸‚åœº ä¸­æ‰¾åˆ°è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œç‚¹å‡»é€‰ä¸­çš„ä¸»é¢˜è¿›å…¥åˆ°ä¸»é¢˜çš„GitHubä»“åº“ï¼Œå¤åˆ¶ä¸»é¢˜ä»“åº“çš„åœ°å€ï¼Œæ‰¾åˆ°Hexoåœ¨æœ¬åœ°çš„ä¸»ç›®å½•(æ­¥éª¤1ä¸­å­˜æ”¾çš„ä½ç½®)ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å…‹éš†ä¸»é¢˜æ–‡ä»¶ï¼š 1git clone &lt;repository url&gt; themes/&lt;ä¸»é¢˜å&gt; æˆ–è€…è¿›å…¥Hexoä¸»ç›®å½•ä¸‹çš„themesç›®å½•ï¼Œå°†ä¸»é¢˜æ–‡ä»¶å…‹éš†è‡³è¯¥ç›®å½•ä¸‹ã€‚æ³¨æ„ï¼š éƒ¨åˆ†ä¸»é¢˜å¯èƒ½éœ€è¦å®‰è£…æ’ä»¶ï¼Œå¯ä»¥å‚è€ƒç›¸åº”ä¸»é¢˜çš„è¯´æ˜æ–‡æ¡£è¿›è¡Œè®¾ç½®ã€‚ä¸‹è½½å¥½ä¸»é¢˜çš„æ–‡ä»¶åéœ€è¦ä¿®æ”¹Hexoçš„é…ç½®æ–‡ä»¶_config.yml (è¯¥æ–‡ä»¶å­˜æ”¾äºHexoçš„ä¸»ç›®å½•ä¸‹)ã€‚ä¿®æ”¹å…¶ä¸­çš„themeå­—æ®µä¿¡æ¯ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 1234# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: landscape ç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¸…æ¥šç¼“å­˜ã€é‡æ–°ç”Ÿæˆã€å¯åŠ¨ç½‘ç«™å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº† 123hexo cleanhexo ghexo s","categories":[],"tags":[]},{"title":"ä½¿ç”¨Jenkins+fastlaneè¿›è¡ŒæŒç»­é›†æˆ","slug":"ä½¿ç”¨Jenkins-fastlaneè¿›è¡ŒæŒç»­é›†æˆ","date":"2018-07-12T10:20:05.000Z","updated":"2018-10-29T06:44:56.000Z","comments":true,"path":"2018/07/12/ä½¿ç”¨Jenkins-fastlaneè¿›è¡ŒæŒç»­é›†æˆ/","link":"","permalink":"http://yoursite.com/2018/07/12/ä½¿ç”¨Jenkins-fastlaneè¿›è¡ŒæŒç»­é›†æˆ/","excerpt":"Jenkensæ˜¯ç”±Javaè¯­è¨€å¼€å‘çš„ä¸€ä¸ªæŒç»­é›†æˆå·¥å…·ï¼Œä½¿ç”¨Jenkins+fastlaneå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»ºä¸€ä¸ªiOSæŒç»­é›†æˆçš„ç¯å¢ƒã€‚","text":"Jenkensæ˜¯ç”±Javaè¯­è¨€å¼€å‘çš„ä¸€ä¸ªæŒç»­é›†æˆå·¥å…·ï¼Œä½¿ç”¨Jenkins+fastlaneå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»ºä¸€ä¸ªiOSæŒç»­é›†æˆçš„ç¯å¢ƒã€‚ 1.æ–°å»ºä»»åŠ¡åœ¨Jenkinsä¸­ä½¿ç”¨æ–°å»ºä»»åŠ¡åŠŸèƒ½ï¼Œè®¾å®šå¥½ä»»åŠ¡åç§°ï¼Œå¹¶ä½¿ç”¨æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®æ–¹å¼åˆ›å»ºä¸€ä¸ªä»»åŠ¡ 2.é…ç½®ä»»åŠ¡ä¿¡æ¯è®¾ç½®ä»»åŠ¡çš„æè¿°ï¼›è®¾ç½®ä¸¢å¼ƒæ—§çš„æ„å»ºï¼Œä½¿ç”¨é»˜è®¤çš„ç­–ç•¥æ–¹å¼å³å¯ï¼Œâ€œä¿å­˜æ„å»ºçš„å¤©æ•°â€œ å’Œ â€ä¿æŒæ„å»ºçš„æœ€å¤§ä¸ªæ•°â€œå¯æ ¹æ®ä¸ªäººéœ€æ±‚è¿›è¡Œé…ç½®ã€‚ é…ç½®ä»»åŠ¡çš„Gitåœ°å€ã€è®¿é—®Gitçš„å‡­è¯(è´¦å·å¯†ç æˆ–è€…ä½¿ç”¨SSH)ã€ä½¿ç”¨çš„åˆ†æ”¯ 3.è®¾ç½®æ„å»ºè§¦å‘å™¨å®šæ—¶æ„å»ºï¼š ä¸€èˆ¬è®¾ç½®ä¸ºH 20 (æ³¨æ„ä½¿ç”¨ç©ºæ ¼åˆ†éš”) æ¯å¤©20ç‚¹å®šæ—¶æ‰§è¡Œè½®è¯¢ SCMï¼šéœ€è¦è®¾ç½®æºç è·¯å¾„æ‰èƒ½èµ·åˆ°è½®è¯¢çš„æ•ˆæœï¼Œä¸€èˆ¬è®¾ç½®ä¸º H/5 * (æ³¨æ„ä½¿ç”¨ç©ºæ ¼åˆ†éš”) æ¯5åˆ†é’Ÿè½®è¯¢ä¸€æ¬¡ 4è®¾ç½®æ„å»ºæ–¹å¼åœ¨æ„å»ºè®¾ç½®ä¸­ä½¿ç”¨å¢åŠ æ„å»ºæ­¥éª¤æ·»åŠ æ‰§è¡Œshellæ–¹å¼æ¥è¿›è¡Œæ„å»ºï¼Œæ­¤å¤„ä¸ºäº†ç®€åŒ–æ„å»ºå‘½ä»¤è®¾ç½®ï¼Œå·²äº‹å…ˆåœ¨é¡¹ç›®ä¸­é›†æˆfastlaneï¼Œfastlaneçš„é›†æˆæ–¹å¼å¯ä»¥å‚è€ƒé“¾æ¥ä½¿ç”¨çš„shellè„šæœ¬å¦‚ä¸‹ 1234567#!/bin/bash#åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•cd DDKanQiu#æ‰§è¡Œpodæ›´æ–°ä¾èµ–pod update --no-repo-update#ä½¿ç”¨fastlaneæ‰“åŒ…å‘½ä»¤fastlane beta æ³¨æ„ï¼šä½¿ç”¨shellè„šæœ¬æ—¶ï¼Œè¯·æå‰é…ç½®å¥½Jenkinsçš„ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è·å–å½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡1echo $PATH é€šè¿‡Jenkinsçš„ ç³»ç»Ÿç®¡ç† - ç³»ç»Ÿè®¾ç½® - å…¨å±€å±æ€§ - ç¯å¢ƒå˜é‡ è¿›è¡Œè®¾ç½®ï¼Œç‚¹å‡»å¢åŠ ï¼Œå¢åŠ ç¯å¢ƒå˜é‡é…ç½® è‡³æ­¤ï¼Œä»»åŠ¡çš„é…ç½®å·²ç»å®Œæˆäº†ï¼Œå¯ä»¥ä¿å­˜è®¾ç½®å¹¶ç«‹å³å¼€å§‹æ„å»ºäº†ã€‚å¯ä»¥é€šè¿‡æ„å»ºè®°å½•æŸ¥è¯¢æ„å»ºçš„çŠ¶æ€ï¼Œå¦‚æœæ„å»ºå¤±è´¥ï¼Œå¯ä»¥é€šè¿‡æ§åˆ¶å°è¾“å‡ºæŸ¥çœ‹logè¾“å‡ºæŸ¥æ‰¾å¤±è´¥åŸå› ï¼Œæœ‰æ—¶å¯èƒ½å› ä¸ºä¸€äº›ç¯å¢ƒé…ç½®çš„ä¸æ­£ç¡®å¯¼è‡´æ„å»ºå¤±è´¥ï¼Œè€å¿ƒæ£€æŸ¥æ§åˆ¶å°è¾“å‡ºå¯èƒ½æœ‰åŠ©äºä½ å¿«é€Ÿæ‰¾åˆ°é—®é¢˜åŸå› ã€‚å¦å¤–ï¼Œç”±äºä¹‹å‰ç›´æ¥ä½¿ç”¨Macå¹³å°çš„pkgå®‰è£…åŒ…å®‰è£…Jenkinsï¼ŒJenkinsä¼šåœ¨ç³»ç»Ÿçš„ç”¨æˆ·ç›®å½•çš„å…±äº«ç›®å½•ä¸‹åˆ›å»ºJenkinsçš„å·¥ä½œç›®å½•ï¼ŒJenkinsæ‹‰å–çš„é¡¹ç›®ä»£ç ä¹Ÿä¼šå­˜äºæ­¤è·¯å¾„ä¸‹ï¼Œè¿™ç§æƒ…å†µå¯èƒ½ç”±äºMacOSçš„æƒé™é™åˆ¶å¯¼è‡´éƒ¨åˆ†é¡¹ç›®ç®¡ç†å·¥å…·æ— æ³•æ­£å¸¸è¿è¡Œ(ä¾‹å¦‚æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°cocoapodsæ— æ³•æ­£å¸¸å·¥ä½œ)ï¼Œç½‘ä¸Šè¯´æ˜¯éœ€è¦å°†Jenkinsçš„ç”¨æˆ·è®¾ç½®ä¸ºrootç”¨æˆ·(æˆ‘æ²¡æœ‰æµ‹è¯•è¿‡)ã€‚ä¸ºæ­¤ï¼Œæˆ‘æ”¹ç”¨äº†Tomcat+Jenkinsçš„waråŒ…çš„æ–¹å¼é‡æ–°éƒ¨ç½²äº†Jenkinså¹¶è§£å†³äº†é—®é¢˜ã€‚","categories":[],"tags":[]},{"title":"fastlaneé›†æˆä¸ä½¿ç”¨","slug":"fastlaneé›†æˆä¸ä½¿ç”¨","date":"2018-05-19T10:21:10.000Z","updated":"2018-10-29T06:44:56.000Z","comments":true,"path":"2018/05/19/fastlaneé›†æˆä¸ä½¿ç”¨/","link":"","permalink":"http://yoursite.com/2018/05/19/fastlaneé›†æˆä¸ä½¿ç”¨/","excerpt":"fastlane æ˜¯ä¸€æ¬¾ä½¿ç”¨rubyå¼€å‘çš„è‡ªåŠ¨åŒ–å·¥å…·é›†ï¼Œä½¿ç”¨å®ƒå¯ä»¥ç®€åŒ–æˆ‘ä»¬éƒ¨ç½²é¡¹ç›®çš„è¿‡ç¨‹ï¼Œå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚","text":"fastlane æ˜¯ä¸€æ¬¾ä½¿ç”¨rubyå¼€å‘çš„è‡ªåŠ¨åŒ–å·¥å…·é›†ï¼Œä½¿ç”¨å®ƒå¯ä»¥ç®€åŒ–æˆ‘ä»¬éƒ¨ç½²é¡¹ç›®çš„è¿‡ç¨‹ï¼Œå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚ GitHub 1.ç¯å¢ƒå®‰è£…1.ç¡®å®šrubyæ˜¯å¦å®‰è£…ï¼Œä½¿ç”¨ruby -v æŸ¥çœ‹rubyç‰ˆæœ¬1ruby -v 2.å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…1xcode-select --install å¦‚æœå‡ºç°1xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates ä»£è¡¨å·²å®‰è£…ï¼Œå¦åˆ™æ ¹æ®æç¤ºè¿›è¡Œæ“ä½œå³å¯å®‰è£… 3.å®‰è£…fastlaneï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼Œå®‰è£…éœ€è¦ä¸€ç‚¹ç­‰å¾…æ—¶é—´1sudo gem install fastlane 2.ä½¿ç”¨fastlaneæ‰“åŒ…å¹¶ä¸Šä¼ åˆ°è’²å…¬è‹±1.å®‰è£…è’²å…¬è‹±æ’ä»¶ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…1fastlane add_plugin pgyer å‡ºç°å¦‚ä¸‹ä¿¡æ¯è¯´æ˜å®‰è£…æˆåŠŸ 2.åˆå§‹åŒ–åˆ‡æ¢åˆ°Xcodeå·¥ç¨‹ç›®å½•ä¸‹é¢ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œåˆå§‹åŒ–1fastlane init åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä»¥ä¸‹é€‰é¡¹ï¼Œç›®å‰ä½¿ç”¨çš„æ˜¯ç¬¬4ä¸ªé€‰é¡¹12345[15:52:35]: What would you like to use fastlane for?1. ğŸ“¸ Automate screenshots2. ğŸ‘©â€âœˆï¸ Automate beta distribution to TestFlight3. ğŸš€ Automate App Store distribution4. ğŸ›  Manual setup - manually setup your project to automate your tasks 12341.è‡ªåŠ¨æˆªå±(æš‚æœªä½¿ç”¨)2.è‡ªåŠ¨å‘å¸ƒæµ‹è¯•ç‰ˆæœ¬åˆ° TestFlight3.è‡ªåŠ¨å‘å¸ƒåˆ°App Store4.æ‰‹åŠ¨é…ç½® åˆå§‹è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸€äº›æç¤ºï¼Œæ ¹æ®æç¤ºä¿¡æ¯ä¸€ç›´æŒ‰Enteré”®å°±å¥½äº†ï¼Œåˆå§‹å®Œæˆåçš„æ‰“å°ä¿¡æ¯å¦‚ä¸‹ 1234567891011121314[16:03:36]: ------------------------------[16:03:36]: --- Where to go from here? ---[16:03:36]: ------------------------------[16:03:36]: ğŸ“¸ Learn more about how to automatically generate localized App Store screenshots:[16:03:36]: https://docs.fastlane.tools/getting-started/ios/screenshots/[16:03:36]: ğŸ‘©â€âœˆï¸ Learn more about distribution to beta testing services:[16:03:36]: https://docs.fastlane.tools/getting-started/ios/beta-deployment/[16:03:36]: ğŸš€ Learn more about how to automate the App Store release process:[16:03:36]: https://docs.fastlane.tools/getting-started/ios/appstore-deployment/[16:03:36]: ğŸ‘©â€âš•ï¸ Learn more about how to setup code signing with fastlane[16:03:36]: https://docs.fastlane.tools/codesigning/getting-started/[16:03:36]: [16:03:36]: To try your new fastlane setup, just enter and run[16:03:36]: $ fastlane custom_lane åˆå§‹åŒ–å®Œæˆåä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆä¸€äº›æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ 3.è®¾ç½®é…ç½®æ–‡ä»¶ Fastfileç„¶åï¼Œæ‰¾åˆ°åœ¨ç”¨çš„å·¥ä½œæµï¼ˆactionï¼‰ï¼Œåœ¨ build_app æŒ‡ä»¤åï¼ŒåŠ å…¥è’²å…¬è‹±æ’ä»¶çš„é…ç½®ä¿¡æ¯1234lane :beta do build_app(export_method: &quot;ad-hoc&quot;) pgyer(api_key: &quot;7f15xxxxxxxxxxxxxxxxxx141&quot;, user_key: &quot;4a5bcxxxxxxxxxxxxxxx3a9e&quot;)end æ³¨æ„ï¼š ä»¥ä¸Šçš„ api_key å’Œ user_keyï¼Œåœ¨è‡ªå·±è´¦å·ä¸‹çš„ åº”ç”¨ç®¡ç† - Appæ¦‚è¿° - API ä¸­å¯ä»¥æ‰¾åˆ°ï¼Œå¹¶æ›¿æ¢åˆ°ä»¥ä¸Šç›¸åº”çš„ä½ç½®ã€‚ åœ¨ Xcode 8.3 å’Œ Xcode 8.3 ä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œå¯¹äº build_app çš„ export_method çš„å€¼ï¼Œéœ€è¦æ ¹æ®å¼€å‘è€…çš„æ‰“åŒ…ç±»å‹è¿›è¡Œè®¾ç½®ï¼Œå¯é€‰çš„å€¼æœ‰ï¼šapp-storeã€ad-hocã€developmentã€enterpriseã€‚å¯¹äº Xcode 8.3 ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œåˆ™ä¸éœ€è¦è®¾ç½® export_methodã€‚ 4.å®Œæˆä»¥ä¸Šé…ç½®ååœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥ä½¿ç”¨äº†1fastlane beta","categories":[],"tags":[]}]}